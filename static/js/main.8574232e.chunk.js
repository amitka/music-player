(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,n,t){e.exports=t(21)},,,,,function(e,n,t){e.exports=t.p+"static/media/Give It Away.5e65dfca.mp3"},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),r=t(8),l=t.n(r),u=t(2),i=t(1),o=t(3),s={name:"Give it away",sound:t(14),artist:"Red Hot Chili Pepper",album:"Blood Suger Sex Magik",pic:"",title:"Give It Away",trackNo:"1",year:"1989"},f=c.a.createContext([{},function(){},function(){}]),d={audioPlayer:new o.Howl({src:[null]}),tracks:[],currentTrackIndex:0,isPlaying:!1,uiTheme:"dark-theme"},m=function(e){var n=Object(a.useState)(d),t=Object(i.a)(n,2),r=t[0],l=t[1];return Object(a.useEffect)(function(){l(function(e){return Object(u.a)({},e,{audioPlayer:new o.Howl({src:[s.sound]}),tracks:[s]})})},[]),c.a.createElement(f.Provider,{value:[r,l,function(){l(d)}]},e.children)},y=(f.Consumer,t(5)),k=function(){var e=Object(a.useContext)(f),n=Object(i.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(null),l=Object(i.a)(r,2),o=l[0],s=l[1],d=Object(a.useState)(!1),m=Object(i.a)(d,2),k=m[0],p=m[1];function b(){var e=[].concat(Object(y.a)(t.tracks),Object(y.a)(o));c(function(n){return Object(u.a)({},n,{tracks:e})})}return Object(a.useEffect)(function(){if(null!==o){p(!1);var e=[];o.forEach(function(n){var t=function(e){return new Promise(function(n,t){var a=new FileReader;a.onload=function(){n(a.result)},a.onError=function(e){t(e)};try{a.readAsDataURL(e)}catch(c){console.log(c)}})}(n);e=[].concat(Object(y.a)(e),[t]),t.then(function(e){n.sound=e,b()}).catch(function(e){return console.log("useReadFileAsync error..."+e)}),function(e){return new Promise(function(n,t){try{window.jsmediatags.read(e,{onSuccess:function(e){n(e)},onError:function(e){t(e)}})}catch(a){console.log(a)}})}(n).then(function(e){var t=e.tags;n.artist=t.artist,n.album=t.album,n.pic=t.picture,n.title=t.title,n.trackNo=t.track,n.year=t.year,b()})}),Promise.all(e).then(function(e){p(!0)})}},[o]),{files:o,readFilesAsync:s,ready:k}},p=function(){var e=Object(a.useContext)(f),n=Object(i.a)(e,3),t=n[0],c=n[1],r=n[2],l=k(),s=l.readFilesAsync,d=l.ready;function m(e){t.audioPlayer.stop(),t.audioPlayer=new o.Howl({src:[t.tracks[e].sound]}),t.isPlaying?y(e):c(function(n){return Object(u.a)({},n,{currentTrackIndex:e})})}function y(e){e===t.currentTrackIndex?p():(t.audioPlayer.play(),c(function(n){return Object(u.a)({},n,{currentTrackIndex:e,isPlaying:!0})}))}function p(){t.isPlaying?t.audioPlayer.pause():t.audioPlayer.play(),c(function(e){return Object(u.a)({},e,{isPlaying:!e.isPlaying})})}function b(){m((t.currentTrackIndex+1)%t.tracks.length)}return Object(a.useEffect)(function(){d&&(console.log("Ready to play !"),c(function(e){return Object(u.a)({},e,{audioPlayer:new o.Howl({src:[e.tracks[0].sound]}),currentTrackIndex:0})}))},[d]),Object(a.useEffect)(function(){return t.isPlaying&&t.audioPlayer.on("end",b),function(){t.audioPlayer.off()}}),{clearAllTracks:function(){t.isPlaying&&t.audioPlayer.unload(),r()},addTracks:function(e){s(e)},playTrack:y,selectTrack:m,togglePlay:p,playPreviousTrack:function(){m(((t.currentTrackIndex+-1)%t.tracks.length+t.tracks.length)%t.tracks.length)},playNextTrack:b,tracksList:t.tracks,currentTrackIndex:t.currentTrackIndex,isPlaying:t.isPlaying}},b=t(4),E=t.n(b),P=function(){var e=p(),n=e.clearAllTracks,t=e.selectTrack,r=e.addTracks,l=e.tracksList,u=e.currentTrackIndex,i=Object(a.useRef)();Object(a.useEffect)(function(){},[]);return c.a.createElement("div",{className:"playlist-container"},c.a.createElement("div",{className:"toolbar-container"},c.a.createElement("input",{ref:i,type:"file",onChange:function(e){var n=Object.values(e.target.files);r(n),i.current.value=""},accept:".mp3,.m4a,.wav,.wma,.aiff",multiple:!0}),c.a.createElement("button",{onClick:n},"Clear"),c.a.createElement("span",null,"".concat(l.length," tracks"))),c.a.createElement("div",{className:"tracks-container"},c.a.createElement("ul",null,l.map(function(e,n){return c.a.createElement("li",{key:n,style:e.sound?{opacity:"1"}:{opacity:".5"},className:E()("track-item",{selected:n===u}),onClick:function(){return function(e){t(e)}(n)}},c.a.createElement("span",null,n+1),c.a.createElement("span",null,e.title||e.name),c.a.createElement("span",null,e.artist),c.a.createElement("span",null,e.album))}))))},v=(t(15),function(){var e=p(),n=e.playTrack,t=e.playPreviousTrack,a=e.playNextTrack,r=e.currentTrackIndex,l=e.isPlaying;return c.a.createElement("div",{className:"player-container"},c.a.createElement("button",{onClick:function(){return t()}},"Prev"),c.a.createElement("button",{onClick:function(){return n(r)}},l?"Pause":"Play"),c.a.createElement("button",{onClick:function(){return a()}},"Next"))}),g=function(){return c.a.createElement("div",{className:"record-container"},c.a.createElement("div",{className:"record-base"},c.a.createElement("div",{className:"record-lbl"},c.a.createElement("img",null))),c.a.createElement("div",{className:"record-pin"}))},j=(t(16),function(){var e=Object(a.useContext)(f),n=Object(i.a)(e,1)[0];return c.a.createElement("main",{className:E()("music-player app-container","".concat(n.uiTheme))},c.a.createElement(g,null),c.a.createElement(v,null),c.a.createElement(P,null))}),O=(t(17),function(){return c.a.createElement(m,null,c.a.createElement(j,null))});t(18),t(19),t(20);l.a.render(c.a.createElement(O,null),document.getElementById("root"))}],[[9,1,2]]]);
//# sourceMappingURL=main.8574232e.chunk.js.map